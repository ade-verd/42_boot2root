#!/bin/bash

CURDIR=`dirname "$(readlink -f "$0")"`

USER="zaz"
PASS="646da671ca01bb5d84dbb5fb2238dc8e"
B2R_PORT=22

REMOTE_FILES="exploit_me"
LOCAL_DEST="/tmp/boot2root/exploit_me"

GHIDRA_SCRIPT="$CURDIR/../../utils/ghidra.sh"

if [ -z ${B2R_HOST+x} ]; then read -p "VM Host: " B2R_HOST; fi

if dpkg -s sshpass >/dev/null 2>&1; then
    export SSHPASS=$PASS
    SSHP="sshpass -e"
fi

# Connect to level and run the script
echo -e "$USER password is: $PASS\n"
(set -x
    mkdir -p $LOCAL_DEST

    $SSHP \
    scp -q -o StrictHostKeyChecking=no \
        -P $B2R_PORT \
        $USER@$B2R_HOST:$REMOTE_FILES \
        $LOCAL_DEST

    ls -lR $LOCAL_DEST
)

